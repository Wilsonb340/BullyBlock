<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Foro de Ayuda</title>
  <link rel="stylesheet" href="../Styles/ForoAyuda.css">
</head>
<body>
  <!-- Overlay for when menu is open -->
  <div id="overlay" class="overlay" onclick="toggleMenu(false)"></div>

  <!-- Side Menu -->
  <div id="sideMenu" class="side-menu">
    <div class="menu-content">
      <a href="4.1MenuInicio.html">
      <button class="menu-item active" onclick="toggleMenu(false)">
        Inicio
        <span class="icon">🏠</span>
      </button></a>
      <a href="10ForoAyuda.html">
      <button class="menu-item" onclick="toggleMenu(false)">
        Foro de Ayuda
        <span class="icon">💬</span>
      </button></a>
      <a href="9ForoAnonimo.html">
      <button class="menu-item" onclick="toggleMenu(false)">
        Foro Anónimo
        <span class="icon">👥</span>
      </button></a>
      <a href="11RedesdApoyo.html">
      <button class="menu-item" onclick="toggleMenu(false)">
        Redes de Apoyo
        <span class="icon">🔗</span>
      </button></a>
      <a href ="SobreNosotros.html">
      <button class="menu-item" onclick="toggleMenu(false)">
        Sobre Nosotros
        <span class="icon">ℹ️</span>
      </button>
      </a>
    </div>
  </div>

  <!-- Main Content -->
  <header class="header">
    <button class="menu-btn" onclick="toggleMenu(true)">☰</button>
    <h1 class="title">Foro de Ayuda</h1>
    <button class="clock-btn">⏰</button>
  </header>

  <main class="container">
    <section>
      <h2>Preguntas Frecuentes</h2>
      <div class="faq">
        <button class="faq-question" onclick="toggleQuestion(0)">¿Cómo inicio un caso de bullying? <span class="arrow">▼</span></button>
        <div class="faq-answer" id="answer0">Aquí va la respuesta a la pregunta...</div>
        
        <button class="faq-question" onclick="toggleQuestion(1)">Necesito ayuda con el proceso de denuncia <span class="arrow">▼</span></button>
        <div class="faq-answer" id="answer1">Aquí va la respuesta a la pregunta...</div>
        
        <button class="faq-question" onclick="toggleQuestion(2)">¿Cuáles son los pasos después de hacer una denuncia? <span class="arrow">▼</span></button>
        <div class="faq-answer" id="answer2">Aquí va la respuesta a la pregunta...</div>
      </div>
    </section>

    <section>
      <h2>Chat de Soporte</h2>
      <div class="chat">
        <input type="text" id="chatMessage" placeholder="¿Qué problema estás teniendo con tu denuncia?" class="chat-input">
        <button class="send-btn" id="sendMessageBtn">➤</button>
      </div>
    </section>
  </main>

  <script>
    // Función para enviar el mensaje al servidor usando AJAX
    document.getElementById('sendMessageBtn').addEventListener('click', function() {
      var messageContent = document.getElementById('chatMessage').value.trim();

      // Validación: asegúrate de que el mensaje no esté vacío
      if (messageContent === "") {
        alert("Por favor, ingresa un mensaje.");
        return;
      }

      // Crear una solicitud AJAX para enviar el mensaje
      var xhr = new XMLHttpRequest();
      xhr.open('POST', '../php/GuardarMensaje.php', true); // Archivo PHP donde se guardará el mensaje
      xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

      xhr.onload = function() {
        if (xhr.status === 200) {
          alert("Mensaje enviado con éxito.");
          document.getElementById('chatMessage').value = ""; // Limpiar el campo de texto
        } else {
          alert("Hubo un error al enviar el mensaje. Intenta nuevamente.");
        }
      };

      xhr.send('messageContent=' + encodeURIComponent(messageContent)); // Enviar el mensaje
    });
  </script>

  <script src="../Scripts/foro.js"></script>
</body>
</html>
